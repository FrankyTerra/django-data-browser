{"version":3,"sources":["Util.js","Results.js","Query.js","Components.js","App.js","index.js"],"names":["assert","require","fetchInProgress","nextFetch","undefined","version","document","getElementById","textContent","trim","CopyText","props","text","ref","useRef","TLink","className","onClick","event","range","createRange","selectNodeContents","current","window","getSelection","removeAllRanges","addRange","execCommand","target","blur","children","type","SLink","AbortError","name","Error","doFetch","url","options","process","reject","Promise","resolve","fetch","then","response","next","res","err","ok","status","response_version","headers","get","console","log","location","reload","doGet","method","json","useData","useState","data","setData","useEffect","updates","prev","Cookies","body","JSON","stringify","doPatch","catch","e","Save","apiUrl","redirectUrl","saving","setSaving","doPost","to","Delete","state","setState","Overlay","message","Object","prototype","hasOwnProperty","Spacer","spaces","Array","map","_","key","HeadCell","query","field","modelField","getField","path","getType","removeField","canPivot","togglePivot","pivoted","concrete","defaultLookup","addFilter","prettyPath","toggleSort","join","dsc","priority","asc","null","sort","DataCell","React","memo","formattedValue","span","value","dangerouslySetInnerHTML","__html","String","colSpan","VTableHeadRow","fields","classNameFirst","i","pathStr","VTableBodyRow","row","HTableRow","col","Results","cols","rows","overlay","colFields","rowFields","length","resFields","rowIndex","table","empty","filterErrors","getPartsForQuery","model","f","filters","lookup","limit","getUrlForQuery","baseUrl","media","query_str","basePath","origin","Query","config","setQuery","this","slice","allModelFields","types","lookup_type","lookups","choices","defaultValue","newFields","filter","push","index","findIndex","newSort","newFilters","getDefaultLookupValue","splice","Number","defaultRowLimit","FilterValue","onChange","onChangeEvent","weekday","month","step","parts","split","option","label","Filter","errorMessage","removeFilter","addField","setFilterLookup","sortedLookups","lookupName","replace","val","setFilterValue","Component","Filters","Field","toggled","toggle","bind","prettyName","AllFields","modelFields","getModelFields","sortedFields","fieldName","concat","ModelSelector","setModel","sortedModels","Logo","QueryPage","results","loading","error","setLimit","min","href","getUrlForMedia","view","pk","EditSavedView","canMakePublic","useParams","setView","link","placeholder","description","checked","public","public_link","google_sheets_formula","SavedViewList","savedViews","HomePage","QueryApp","popstate","booting","Sentry","fetchResults","handleError","fieldStr","queryStr","reqState","history","replaceState","addEventListener","removeEventListener","queryChange","newState","request","pushState","deepStrictEqual","handleQueryChange","Bob","useLocation","search","App","basename","id","parse","sentryDsn","dsn","release","attachStacktrace","maxValueLength","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.bac2eb31.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport Cookies from \"js-cookie\";\nimport \"./App.css\";\nconst assert = require(\"assert\");\nlet fetchInProgress = false;\nlet nextFetch = undefined;\n\nconst version = document.getElementById(\"backend-version\").textContent.trim();\n\nfunction CopyText(props) {\n    const { text } = props;\n    const ref = useRef(null);\n    return (\n        <>\n            <span ref={ref}>{text}</span>{\" \"}\n            <TLink\n                className=\"CopyToClipboard\"\n                onClick={(event) => {\n                    const range = document.createRange();\n                    range.selectNodeContents(ref.current);\n                    window.getSelection().removeAllRanges();\n                    window.getSelection().addRange(range);\n                    document.execCommand(\"copy\");\n                    window.getSelection().removeAllRanges();\n                    event.target.blur();\n                }}\n            >\n                (copy to clipboard)\n            </TLink>\n        </>\n    );\n}\n\nfunction TLink(props) {\n    const { className, onClick, children } = props;\n    return (\n        <button\n            {...{ onClick }}\n            type=\"button\"\n            className={\"Link \" + (className || \"\")}\n        >\n            {children}\n        </button>\n    );\n}\n\nfunction SLink(props) {\n    const { className, onClick, children } = props;\n    return (\n        <button\n            {...{ onClick }}\n            type=\"button\"\n            className={\"sLink material-icons \" + (className || \"\")}\n        >\n            {children}\n        </button>\n    );\n}\n\nclass AbortError extends Error {\n    name = \"AbortError\";\n}\n\nfunction doFetch(url, options, process) {\n    if (fetchInProgress) {\n        if (nextFetch) {\n            nextFetch.reject(new AbortError(\"skipped\"));\n        }\n        return new Promise((resolve, reject) => {\n            nextFetch = { resolve, reject, url, options, process };\n        });\n    }\n\n    fetchInProgress = true;\n\n    return fetch(url, options)\n        .then((response) => {\n            // do we have a next fetch we need to trigger\n            const next = nextFetch;\n            nextFetch = undefined;\n            fetchInProgress = false;\n\n            if (next) {\n                doFetch(next.url, next.options, next.process).then(\n                    (res) => next.resolve(res),\n                    (err) => next.reject(err)\n                );\n                throw new AbortError(\"superceeded\");\n            } else {\n                return response;\n            }\n        })\n        .then((response) => {\n            // check status\n            assert.ok(response.status >= 200);\n            assert.ok(response.status < 300);\n            return response;\n        })\n        .then((response) => {\n            // check server version\n            const response_version = response.headers.get(\"x-version\");\n            if (response_version !== version) {\n                console.log(\n                    \"Version mismatch, hard reload\",\n                    version,\n                    response_version\n                );\n                window.location.reload(true);\n            }\n            return response;\n        })\n        .then((response) => process(response)); // process data\n}\n\nfunction doGet(url) {\n    return doFetch(url, { method: \"GET\" }, (response) => response.json());\n}\n\nfunction doDelete(url) {\n    return doFetch(\n        url,\n        {\n            method: \"DELETE\",\n            headers: { \"X-CSRFToken\": Cookies.get(\"csrftoken\") },\n        },\n        (response) => response\n    );\n}\n\nfunction doPatch(url, data) {\n    return doFetch(\n        url,\n        {\n            method: \"PATCH\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"X-CSRFToken\": Cookies.get(\"csrftoken\"),\n            },\n            body: JSON.stringify(data),\n        },\n        (response) => response.json()\n    );\n}\n\nfunction doPost(url, data) {\n    return doFetch(\n        url,\n        {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"X-CSRFToken\": Cookies.get(\"csrftoken\"),\n            },\n            body: JSON.stringify(data),\n        },\n        (response) => response.json()\n    );\n}\n\nfunction useData(url) {\n    const [data, setData] = useState();\n    useEffect(() => {\n        doGet(url).then((response) => setData(response));\n    }, [url]);\n    return [\n        data,\n        (updates) => {\n            setData((prev) => ({ ...prev, ...updates }));\n            doPatch(url, updates)\n                .then((response) =>\n                    setData((prev) => ({ ...prev, ...response }))\n                )\n                .catch((e) => {\n                    if (e.name !== \"AbortError\") throw e;\n                });\n        },\n    ];\n}\n\nfunction Save(props) {\n    const { name, apiUrl, data, redirectUrl } = props;\n    const [saving, setSaving] = useState(\"save\");\n    if (saving === \"save\")\n        return (\n            <TLink\n                onClick={(event) => {\n                    setSaving(\"saving\");\n                    doPost(apiUrl, data).then((response) =>\n                        setSaving(response)\n                    );\n                }}\n            >\n                Save {name || \"\"}\n            </TLink>\n        );\n    else if (saving === \"saving\") return <>Saving {name || \"\"}</>;\n    else {\n        const url =\n            typeof redirectUrl === \"function\"\n                ? redirectUrl(saving)\n                : redirectUrl;\n        return <Redirect to={url} />;\n    }\n}\n\nfunction Delete(props) {\n    const { name, apiUrl, redirectUrl } = props;\n    const [state, setState] = useState(\"normal\");\n    if (state === \"normal\")\n        return (\n            <TLink\n                onClick={(event) => {\n                    setState(\"confirm\");\n                }}\n            >\n                Delete {name || \"\"}\n            </TLink>\n        );\n    else if (state === \"confirm\")\n        return (\n            <TLink\n                onClick={(event) => {\n                    setState(\"deleting\");\n                    doDelete(apiUrl).then((response) => setState(\"deleted\"));\n                }}\n            >\n                Are you sure?\n            </TLink>\n        );\n    else if (state === \"deleting\") return \"Deleting\";\n    else if (state === \"deleted\") return <Redirect to={redirectUrl} />;\n    else throw new Error(`unknown delete state: ${state}`);\n}\n\nfunction Overlay(props) {\n    if (!props.message) return null;\n    return (\n        <div className=\"Overlay\">\n            <h1>{props.message}</h1>\n        </div>\n    );\n}\n\nfunction is(x: any, y: any) {\n    return (\n        (x === y && (x !== 0 || 1 / x === 1 / y)) || (x !== x && y !== y) // eslint-disable-line no-self-compare\n    );\n}\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction shallowEqual(objA: mixed, objB: mixed): boolean {\n    if (is(objA, objB)) {\n        return true;\n    }\n\n    if (\n        typeof objA !== \"object\" ||\n        objA === null ||\n        typeof objB !== \"object\" ||\n        objB === null\n    ) {\n        return false;\n    }\n\n    const keysA = Object.keys(objA);\n    const keysB = Object.keys(objB);\n\n    if (keysA.length !== keysB.length) {\n        console.log(\"different keys\", keysA, keysB);\n        return false;\n    }\n\n    // Test for A's keys different from B.\n    for (let i = 0; i < keysA.length; i++) {\n        if (\n            !hasOwnProperty.call(objB, keysA[i]) ||\n            !is(objA[keysA[i]], objB[keysA[i]])\n        ) {\n            console.log(\n                \"different key\",\n                keysA[i],\n                objA[keysA[i]],\n                objB[keysA[i]]\n            );\n            return false;\n        }\n    }\n\n    return true;\n}\n\nexport {\n    TLink,\n    SLink,\n    doPatch,\n    doGet,\n    doDelete,\n    doPost,\n    useData,\n    version,\n    Save,\n    Delete,\n    CopyText,\n    fetchInProgress,\n    Overlay,\n    shallowEqual,\n};\n","import React from \"react\";\nimport \"./App.css\";\nimport { TLink, SLink, Overlay } from \"./Util\";\n\nfunction Spacer(props) {\n  const { spaces } = props;\n  if (spaces > 0) {\n    return [...Array(spaces)].map((_, key) => (\n      <td className=\"Empty\" key={key} />\n    ));\n  }\n  return null;\n}\n\nfunction HeadCell(props) {\n  const { query, field, className } = props;\n  const modelField = query.getField(field.path);\n  const type = query.getType(modelField);\n  return (\n    <th {...{ className }}>\n      <SLink onClick={() => query.removeField(field)}>close</SLink>\n      {modelField.canPivot && (\n        <>\n          <SLink onClick={() => query.togglePivot(field)}>\n            {field.pivoted ? \"call_received\" : \"call_made\"}\n          </SLink>\n        </>\n      )}\n      {modelField.concrete && type.defaultLookup ? (\n        <>\n          <SLink onClick={() => query.addFilter(field.path, field.prettyPath)}>\n            filter_alt\n          </SLink>{\" \"}\n          <TLink onClick={() => query.toggleSort(field)}>\n            {field.prettyPath.join(\" \")}\n            {\n              {\n                dsc: `↑${field.priority}`,\n                asc: `↓${field.priority}`,\n                null: \"\",\n              }[field.sort]\n            }\n          </TLink>\n        </>\n      ) : (\n        \" \" + field.prettyPath.join(\" \")\n      )}\n    </th>\n  );\n}\n\nconst DataCell = React.memo((props) => {\n  const { modelField, className, span, value } = props;\n  let formattedValue;\n  if (value === undefined) {\n    formattedValue = \"\";\n  } else if (modelField.type === \"html\" && value) {\n    formattedValue = <div dangerouslySetInnerHTML={{ __html: value }} />;\n  } else {\n    formattedValue = String(value);\n  }\n  return (\n    <td className={modelField.type + \" \" + className || \"\"} colSpan={span || 1}>\n      {formattedValue}\n    </td>\n  );\n});\n\nfunction VTableHeadRow(props) {\n  const { fields, query, classNameFirst, className } = props;\n  return fields.map((field, i) => (\n    <HeadCell\n      {...{ query, field }}\n      key={field.pathStr}\n      className={`HoriBorder ${className} ` + (i ? \"\" : classNameFirst)}\n    />\n  ));\n}\n\nfunction VTableBodyRow(props) {\n  const { fields, query, classNameFirst, className, row } = props;\n  return fields.map((field, i) => (\n    <DataCell\n      key={field.pathStr}\n      value={row ? row[field.pathStr] : \"\"}\n      className={`${i ? \"\" : classNameFirst} ${className}`}\n      modelField={query.getField(field.path)}\n    />\n  ));\n}\n\nfunction HTableRow(props) {\n  const { query, field, data, span, className } = props;\n  return (\n    <>\n      <HeadCell {...{ query, field }} />\n      {data.map((col, key) => (\n        <DataCell\n          {...{ key, span, className }}\n          value={col[field.pathStr]}\n          modelField={query.getField(field.path)}\n        />\n      ))}\n    </>\n  );\n}\n\nfunction Results(props) {\n  const { query, cols, rows, body, overlay } = props;\n  return (\n    <div className=\"Results\">\n      <Overlay message={overlay} />\n      <div className=\"Scroller\">\n        <table>\n          <thead>\n            {/* pivoted data */}\n            {query.colFields().map((field) => {\n              return (\n                <tr key={field.pathStr}>\n                  <Spacer spaces={query.rowFields().length - 1} />\n                  <HTableRow\n                    {...{ query, field }}\n                    span={query.resFields().length}\n                    data={cols}\n                    className={overlay && \"Fade\"}\n                  />\n                </tr>\n              );\n            })}\n\n            {/* column headers */}\n            <tr>\n              <Spacer spaces={1 - query.rowFields().length} />\n              <VTableHeadRow\n                {...{ query }}\n                fields={query.rowFields()}\n                className=\"Freeze\"\n              />\n              {cols.map((_, key) => (\n                <VTableHeadRow\n                  {...{ key, query }}\n                  fields={query.resFields()}\n                  classNameFirst=\"LeftBorder\"\n                  className=\"Freeze\"\n                />\n              ))}\n            </tr>\n          </thead>\n\n          {/* row headers and body */}\n          <tbody className={overlay && \"Fade\"}>\n            {rows.map((row, rowIndex) => (\n              <tr key={rowIndex}>\n                <Spacer spaces={1 - query.rowFields().length} />\n                <VTableBodyRow {...{ query, row }} fields={query.rowFields()} />\n                {body.map((table, key) => (\n                  <VTableBodyRow\n                    {...{ key, query }}\n                    fields={query.resFields()}\n                    row={table[rowIndex]}\n                    classNameFirst=\"LeftBorder\"\n                  />\n                ))}\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\nexport { Results };\n","const empty = {\n  rows: [{}],\n  cols: [{}],\n  body: [[{}]],\n  length: 0,\n  filterErrors: [],\n};\n\nfunction getPartsForQuery(query) {\n  return {\n    model: query.model,\n    fields: query.fields\n      .map(\n        (f) =>\n          (f.pivoted ? \"&\" : \"\") +\n          f.path.join(\"__\") +\n          { asc: `+${f.priority}`, dsc: `-${f.priority}`, null: \"\" }[f.sort]\n      )\n      .join(\",\"),\n    query: query.filters\n      .map((f) => `${f.path.join(\"__\")}__${f.lookup}=${f.value}`)\n      .join(\"&\"),\n    limit: query.limit,\n  };\n}\n\nfunction getUrlForQuery(baseUrl, query, media) {\n  const { model, fields, query: query_str, limit } = getPartsForQuery(query);\n  const basePath = `${baseUrl}query/${model}`;\n  return `${window.location.origin}${basePath}/${fields}.${media}?${query_str}&limit=${limit}`;\n}\n\nclass Query {\n  constructor(config, query, setQuery) {\n    this.config = config;\n    this.query = query;\n    this.setQuery = setQuery;\n  }\n\n  getField(path) {\n    const field = path.slice(-1);\n    let model = this.query.model;\n    for (const field of path.slice(0, -1)) {\n      model = this.config.allModelFields[model].fields[field].model;\n    }\n    return this.config.allModelFields[model].fields[field];\n  }\n\n  getType(field) {\n    return this.config.types[field.type];\n  }\n\n  getModelFields(model) {\n    return this.config.allModelFields[model];\n  }\n\n  getDefaultLookupValue(field, type, lookup) {\n    const lookup_type = type.lookups[lookup].type;\n    if (lookup_type === \"numberchoice\" || lookup_type === \"stringchoice\")\n      return String(field.choices[0][0]);\n    else return String(this.config.types[lookup_type].defaultValue);\n  }\n\n  addField(path, prettyPath) {\n    const newFields = this.query.fields.filter(\n      (f) => f.pathStr !== path.join(\"__\")\n    );\n    newFields.push({\n      path: path,\n      pathStr: path.join(\"__\"),\n      prettyPath: prettyPath,\n      sort: null,\n      priority: null,\n      pivoted: false,\n    });\n    this.setQuery({ fields: newFields });\n  }\n\n  removeField(field) {\n    this.setQuery({\n      fields: this.query.fields.filter((f) => f.pathStr !== field.pathStr),\n    });\n  }\n\n  toggleSort(field) {\n    const index = this.query.fields.findIndex(\n      (f) => f.pathStr === field.pathStr\n    );\n    const newSort = { asc: \"dsc\", dsc: null, null: \"asc\" }[field.sort];\n    let newFields = this.query.fields.slice();\n\n    if (field.sort) {\n      // move any later sort fields forward\n      newFields = newFields.map((f) => ({\n        ...f,\n        priority:\n          f.priority != null && f.priority > field.priority\n            ? f.priority - 1\n            : f.priority,\n      }));\n    }\n\n    if (newSort) {\n      // move all other fiels back and insert the updated one\n      newFields = newFields.map((f) => ({\n        ...f,\n        priority: f.priority != null ? f.priority + 1 : f.priority,\n      }));\n      newFields[index] = { ...field, sort: newSort, priority: 0 };\n    } else {\n      // blank the sort on the updated field\n      newFields[index] = { ...field, sort: null, priority: null };\n    }\n\n    this.setQuery({\n      fields: newFields,\n    });\n  }\n\n  togglePivot(field) {\n    const index = this.query.fields.findIndex(\n      (f) => f.pathStr === field.pathStr\n    );\n    let newFields = this.query.fields.slice();\n    newFields[index].pivoted = !newFields[index].pivoted;\n    this.setQuery({\n      fields: newFields,\n    });\n  }\n\n  addFilter(path, prettyPath) {\n    const field = this.getField(path);\n    const type = this.getType(field);\n    const newFilters = this.query.filters.slice();\n    newFilters.push({\n      path: path,\n      pathStr: path.join(\"__\"),\n      prettyPath: prettyPath,\n      lookup: type.defaultLookup,\n      value: this.getDefaultLookupValue(field, type, type.defaultLookup),\n    });\n    this.setQuery({ filters: newFilters });\n  }\n\n  removeFilter(index) {\n    const newFilters = this.query.filters.slice();\n    newFilters.splice(index, 1);\n    this.setQuery({ filters: newFilters });\n  }\n\n  setFilterValue(index, value) {\n    const newFilters = this.query.filters.slice();\n    newFilters[index] = { ...newFilters[index], value: value };\n    this.setQuery({ filters: newFilters });\n  }\n\n  setFilterLookup(index, lookup) {\n    const newFilters = this.query.filters.slice();\n    const filter = newFilters[index];\n    const field = this.getField(newFilters[index].path);\n    const type = this.getType(field);\n    if (type.lookups[filter.lookup].type !== type.lookups[lookup].type) {\n      filter.value = this.getDefaultLookupValue(field, type, lookup);\n    }\n    filter.lookup = lookup;\n    this.setQuery({ filters: newFilters });\n  }\n\n  setLimit(limit) {\n    limit = Number(limit);\n    this.setQuery({ limit: limit > 0 ? limit : 1 });\n  }\n\n  setModel(model) {\n    this.setQuery({\n      model: model,\n      fields: [],\n      filters: [],\n      limit: this.config.defaultRowLimit,\n      ...empty,\n    });\n  }\n\n  getUrlForMedia(media) {\n    return getUrlForQuery(this.config.baseUrl, this.query, media);\n  }\n\n  colFields() {\n    return this.query.fields.filter((f) => f.pivoted);\n  }\n\n  rowFields() {\n    if (this.colFields().length) {\n      return this.query.fields.filter(\n        (f) => !f.pivoted && this.getField(f.path).canPivot\n      );\n    } else {\n      return this.query.fields;\n    }\n  }\n\n  resFields() {\n    if (this.colFields().length) {\n      return this.query.fields.filter((f) => !this.getField(f.path).canPivot);\n    } else {\n      return [];\n    }\n  }\n}\n\nexport { Query, getPartsForQuery, getUrlForQuery, empty };\n","import React from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { TLink, SLink, useData, version, Save, Delete, CopyText } from \"./Util\";\nimport { Results } from \"./Results\";\nimport { getPartsForQuery } from \"./Query\";\nimport \"./App.css\";\n\nfunction FilterValue(props) {\n  const { lookup, onChange, value, field } = props;\n  const onChangeEvent = (e) => onChange(e.target.value);\n  if (props.lookup.type === \"boolean\")\n    return (\n      <select {...{ value }} onChange={onChangeEvent} className=\"FilterValue\">\n        <option value={true}>true</option>\n        <option value={false}>false</option>\n      </select>\n    );\n  else if (lookup.type === \"weekday\")\n    return (\n      <select {...{ value }} onChange={onChangeEvent} className=\"FilterValue\">\n        {[\n          \"Sunday\",\n          \"Monday\",\n          \"Tuesday\",\n          \"Wednesday\",\n          \"Thursday\",\n          \"Friday\",\n          \"Saturday\",\n        ].map((weekday) => (\n          <option value={weekday}>{weekday}</option>\n        ))}\n      </select>\n    );\n  else if (lookup.type === \"month\")\n    return (\n      <select {...{ value }} onChange={onChangeEvent} className=\"FilterValue\">\n        {[\n          \"January\",\n          \"Febuary\",\n          \"March\",\n          \"April\",\n          \"May\",\n          \"June\",\n          \"July\",\n          \"August\",\n          \"September\",\n          \"October\",\n          \"November\",\n          \"December\",\n        ].map((month) => (\n          <option value={month}>{month}</option>\n        ))}\n      </select>\n    );\n  else if (\n    field.choices.length &&\n    (lookup.type === \"numberchoice\" || lookup.type === \"stringchoice\")\n  )\n    return (\n      <select {...{ value }} onChange={onChangeEvent} className=\"FilterValue\">\n        {field.choices.map(([option, label]) => (\n          <option value={option}>{label}</option>\n        ))}\n      </select>\n    );\n  else if (\n    lookup.type === \"number\" ||\n    lookup.type === \"numberchoice\" ||\n    lookup.type === \"year\"\n  )\n    return (\n      <input\n        {...{ value }}\n        onChange={onChangeEvent}\n        className=\"FilterValue\"\n        type=\"number\"\n        step=\"0\"\n      />\n    );\n  else if (lookup.type === \"jsonfield\") {\n    const parts = value.split(/\\|(.*)/);\n    return (\n      <>\n        <input\n          value={parts[0]}\n          onChange={(e) => onChange(`${e.target.value}|${parts[1]}`)}\n          className=\"FilterValue Half\"\n          type=\"text\"\n        />\n        <input\n          value={parts[1]}\n          onChange={(e) => onChange(`${parts[0]}|${e.target.value}`)}\n          className=\"FilterValue Half\"\n          type=\"text\"\n        />\n      </>\n    );\n  } else\n    return (\n      <input\n        {...{ value }}\n        onChange={onChangeEvent}\n        className=\"FilterValue\"\n        type=\"text\"\n      />\n    );\n}\n\nclass Filter extends React.Component {\n  render() {\n    const {\n      path,\n      prettyPath,\n      index,\n      lookup,\n      query,\n      value,\n      errorMessage,\n    } = this.props;\n    const field = query.getField(path);\n    const type = query.getType(field);\n    return (\n      <tr>\n        <td>\n          <SLink onClick={() => query.removeFilter(index)}>close</SLink>{\" \"}\n          <TLink onClick={() => query.addField(path, prettyPath)}>\n            {prettyPath.join(\" \")}\n          </TLink>{\" \"}\n        </td>\n        <td>\n          <select\n            className=\"Lookup\"\n            value={lookup}\n            onChange={(e) => query.setFilterLookup(index, e.target.value)}\n          >\n            {type.sortedLookups.map((lookupName) => (\n              <option key={lookupName} value={lookupName}>\n                {lookupName.replace(/_/g, \" \")}\n              </option>\n            ))}\n          </select>\n        </td>\n        <td>=</td>\n        <td>\n          <FilterValue\n            {...{ value, field }}\n            onChange={(val) => query.setFilterValue(index, val)}\n            lookup={type.lookups[lookup]}\n          />\n          {errorMessage && <p className=\"Error\">{errorMessage}</p>}\n        </td>\n      </tr>\n    );\n  }\n}\n\nfunction Filters(props) {\n  const { query, filterErrors } = props;\n  return (\n    <form className=\"Filters\">\n      <table className=\"Flat\">\n        <tbody>\n          {props.filters.map((filter, index) => (\n            <Filter\n              {...{ query, index }}\n              {...filter}\n              key={index}\n              errorMessage={filterErrors[index]}\n            />\n          ))}\n        </tbody>\n      </table>\n    </form>\n  );\n}\n\nclass Field extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { toggled: false };\n  }\n\n  toggle() {\n    this.setState((state) => ({\n      toggled: !state.toggled,\n    }));\n  }\n\n  render() {\n    const { query, path, prettyPath, modelField } = this.props;\n    const type = query.getType(modelField);\n    return (\n      <>\n        <tr>\n          <td>\n            {modelField.concrete && type.defaultLookup && (\n              <SLink onClick={() => query.addFilter(path, prettyPath)}>\n                filter_alt\n              </SLink>\n            )}\n          </td>\n          <td>\n            {modelField.model && (\n              <SLink className=\"ToggleLink\" onClick={this.toggle.bind(this)}>\n                {this.state.toggled ? \"remove\" : \"add\"}\n              </SLink>\n            )}\n          </td>\n          <td>\n            {modelField.type ? (\n              <TLink onClick={() => query.addField(path, prettyPath)}>\n                {modelField.prettyName}\n              </TLink>\n            ) : (\n              modelField.prettyName\n            )}\n          </td>\n        </tr>\n        {this.state.toggled && (\n          <tr>\n            <td></td>\n            <td colSpan=\"2\">\n              <AllFields\n                {...{ query, path, prettyPath }}\n                model={modelField.model}\n              />\n            </td>\n          </tr>\n        )}\n      </>\n    );\n  }\n}\n\nfunction AllFields(props) {\n  const { query, model, path, prettyPath } = props;\n  const modelFields = query.getModelFields(model);\n  return (\n    <table>\n      <tbody>\n        {modelFields.sortedFields.map((fieldName) => {\n          const modelField = modelFields.fields[fieldName];\n          return (\n            <Field\n              key={fieldName}\n              {...{ query, modelField }}\n              path={path.concat([fieldName])}\n              prettyPath={prettyPath.concat([modelField.prettyName])}\n            />\n          );\n        })}\n      </tbody>\n    </table>\n  );\n}\n\nfunction ModelSelector(props) {\n  return (\n    <select\n      className=\"ModelSelector\"\n      onChange={(e) => props.query.setModel(e.target.value)}\n      value={props.model}\n    >\n      {props.sortedModels.map((model) => (\n        <option key={model}>{model}</option>\n      ))}\n    </select>\n  );\n}\n\nfunction Logo(props) {\n  return (\n    <Link to=\"/\" className=\"Logo\">\n      <span>DDB</span>\n      <span className=\"Version\">v{version}</span>\n    </Link>\n  );\n}\n\nfunction QueryPage(props) {\n  const {\n    query,\n    rows,\n    cols,\n    body,\n    length,\n    sortedModels,\n    model,\n    filters,\n    filterErrors,\n    baseUrl,\n    loading,\n    error,\n  } = props;\n\n  let overlay;\n  if (loading) overlay = \"Loading...\";\n  else if (error) overlay = \"Error\";\n\n  let results;\n  if (query.rowFields().length || query.colFields().length)\n    results = <Results {...{ query, rows, cols, body, overlay }} />;\n  else results = <h2>No fields selected</h2>;\n\n  return (\n    <>\n      <ModelSelector {...{ query, sortedModels, model }} />\n      <Filters {...{ query, filters, filterErrors }} />\n      <p>\n        Limit:{\" \"}\n        <input\n          className=\"RowLimit\"\n          type=\"number\"\n          value={query.query.limit}\n          onChange={(event) => {\n            query.setLimit(event.target.value);\n          }}\n          min=\"1\"\n        />{\" \"}\n        - Showing {length} results -{\" \"}\n        <a href={query.getUrlForMedia(\"csv\")}>Download as CSV</a> -{\" \"}\n        <a href={query.getUrlForMedia(\"json\")}>View as JSON</a> -{\" \"}\n        <Save\n          name=\"View\"\n          apiUrl={`${baseUrl}api/views/`}\n          data={getPartsForQuery(query.query)}\n          redirectUrl={(view) => `/views/${view.pk}.html`}\n        />\n      </p>\n      <div className=\"MainSpace\">\n        <div className=\"FieldsList\">\n          <AllFields {...{ query, model }} path={[]} prettyPath={[]} />\n        </div>\n        {results}\n        <div />\n      </div>\n    </>\n  );\n}\n\nfunction EditSavedView(props) {\n  const { canMakePublic, baseUrl } = props;\n  const { pk } = useParams();\n  const url = `${baseUrl}api/views/${pk}/`;\n  const [view, setView] = useData(url);\n  if (!view) return \"\";\n  return (\n    <div className=\"EditSavedView\">\n      <div className=\"SavedViewActions\">\n        <span className=\"SavedViewTitle\">Saved View</span>\n        <Link to={view.link}>Open</Link>\n      </div>\n      <form>\n        <input\n          type=\"text\"\n          value={view.name}\n          onChange={(event) => {\n            setView({ name: event.target.value });\n          }}\n          className=\"SavedViewName\"\n          placeholder=\"enter a name\"\n        />\n        <table>\n          <tbody>\n            <tr>\n              <th>Model:</th>\n              <td>{view.model}</td>\n            </tr>\n            <tr>\n              <th>Fields:</th>\n              <td>{view.fields}</td>\n            </tr>\n            <tr>\n              <th>Filters:</th>\n              <td>{view.query}</td>\n            </tr>\n            <tr>\n              <th>Limit:</th>\n              <td className=\"SavedViewLimit\">\n                <input\n                  className=\"RowLimit\"\n                  type=\"number\"\n                  value={view.limit}\n                  onChange={(event) => {\n                    setView({ limit: event.target.value });\n                  }}\n                />\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <textarea\n          value={view.description}\n          onChange={(event) => {\n            setView({ description: event.target.value });\n          }}\n          placeholder=\"enter a description\"\n        />\n        {canMakePublic && (\n          <table>\n            <tbody>\n              <tr>\n                <th>Is Public:</th>\n                <td>\n                  <input\n                    type=\"checkbox\"\n                    checked={view.public}\n                    onChange={(event) => {\n                      setView({ public: event.target.checked });\n                    }}\n                  />\n                </td>\n              </tr>\n              <tr>\n                <th>Public link:</th>\n                <td>{view.public && <CopyText text={view.public_link} />}</td>\n              </tr>\n              <tr>\n                <th>Google Sheets:</th>\n                <td>\n                  {view.public && (\n                    <CopyText text={view.google_sheets_formula} />\n                  )}\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        )}\n      </form>\n      <div className=\"SavedViewActions\">\n        <Delete apiUrl={url} redirectUrl=\"/\" />\n        <Link to=\"/\">Done</Link>\n      </div>\n    </div>\n  );\n}\n\nfunction SavedViewList(props) {\n  const { baseUrl } = props;\n  const [savedViews] = useData(`${baseUrl}api/views/`);\n  if (!savedViews) return \"\";\n  return (\n    <div>\n      <h1>Saved Views</h1>\n      <div>\n        {savedViews.map((view, index) => (\n          <div key={index}>\n            <p>\n              <Link className=\"Link\" to={view.link}>\n                {view.model} - {view.name}\n              </Link>{\" \"}\n              (<Link to={`/views/${view.pk}.html`}>edit</Link>)\n            </p>\n            <p>{view.description}</p>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction HomePage(props) {\n  const { sortedModels, baseUrl } = props;\n  return (\n    <div className=\"Index\">\n      <div>\n        <h1>Models</h1>\n        <div>\n          {sortedModels.map((model) => (\n            <div key={model}>\n              <Link to={`/query/${model}/.html`} className=\"Link\">\n                {model}\n              </Link>\n            </div>\n          ))}\n        </div>\n      </div>\n      <SavedViewList {...{ baseUrl }} />\n    </div>\n  );\n}\n\nexport { HomePage, QueryPage, Logo, EditSavedView };\n","import * as Sentry from \"@sentry/browser\";\nimport React from \"react\";\nimport {\n  BrowserRouter,\n  Switch,\n  Route,\n  useParams,\n  useLocation,\n} from \"react-router-dom\";\nimport \"./App.css\";\nimport { HomePage, QueryPage, Logo, EditSavedView } from \"./Components\";\nimport { Query, getUrlForQuery, empty } from \"./Query\";\nimport { doGet, fetchInProgress } from \"./Util\";\n\nconst assert = require(\"assert\");\n\nclass QueryApp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      booting: true,\n      loading: false,\n      error: undefined,\n      model: \"\",\n      fields: [],\n      filters: [],\n      limit: props.config.defaultRowLimit,\n      ...empty,\n    };\n  }\n\n  handleError(e) {\n    if (e.name !== \"AbortError\") {\n      this.setState({ error: true, loading: false });\n      console.log(e);\n      Sentry.captureException(e);\n    }\n  }\n\n  fetchResults(state) {\n    this.setState({ loading: true });\n    const url = getUrlForQuery(this.props.config.baseUrl, state, \"json\");\n\n    return doGet(url).then((response) => {\n      this.setState({\n        body: response.body,\n        cols: response.cols,\n        rows: response.rows,\n        length: response.length,\n        filterErrors: response.filterErrors,\n        loading: fetchInProgress,\n        error: undefined,\n      });\n      return response;\n    });\n  }\n\n  popstate(e) {\n    this.setState(e.state);\n    this.fetchResults(e.state).catch(this.handleError.bind(this));\n  }\n  popstate = this.popstate.bind(this);\n\n  componentDidMount() {\n    const { model, fieldStr, queryStr, config } = this.props;\n    const url = `${config.baseUrl}query/${model}/${fieldStr}.query${queryStr}`;\n    doGet(url).then((response) => {\n      const reqState = {\n        booting: false,\n        loading: true,\n        error: undefined,\n        model: response.model,\n        fields: response.fields,\n        filters: response.filters,\n        limit: response.limit,\n        ...empty,\n      };\n      this.setState(reqState);\n      window.history.replaceState(\n        reqState,\n        null,\n        getUrlForQuery(this.props.config.baseUrl, reqState, \"html\")\n      );\n      window.addEventListener(\"popstate\", this.popstate);\n      this.fetchResults(this.state).catch(this.handleError.bind(this));\n    });\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"popstate\", this.popstate);\n  }\n\n  handleQueryChange(queryChange) {\n    this.setState(queryChange);\n    const newState = { ...this.state, ...queryChange };\n    const request = {\n      model: newState.model,\n      fields: newState.fields,\n      filters: newState.filters,\n      limit: newState.limit,\n      ...empty,\n    };\n    window.history.pushState(\n      request,\n      null,\n      getUrlForQuery(this.props.config.baseUrl, newState, \"html\")\n    );\n    this.fetchResults(newState)\n      .then((response) => {\n        response = { ...response, ...empty };\n        assert.deepStrictEqual(response, request);\n      })\n      .catch(this.handleError.bind(this));\n  }\n\n  render() {\n    if (this.state.booting) return \"\";\n    const query = new Query(\n      this.props.config,\n      this.state,\n      this.handleQueryChange.bind(this)\n    );\n    return (\n      <QueryPage\n        query={query}\n        sortedModels={this.props.config.sortedModels}\n        baseUrl={this.props.config.baseUrl}\n        {...this.state}\n      />\n    );\n  }\n}\n\nfunction Bob(props) {\n  const { model, fieldStr } = useParams();\n  return (\n    <QueryApp\n      {...props}\n      model={model}\n      fieldStr={fieldStr || \"\"}\n      queryStr={useLocation().search}\n    />\n  );\n}\n\nfunction App(props) {\n  const { baseUrl, sortedModels, canMakePublic } = props;\n  return (\n    <BrowserRouter basename={baseUrl}>\n      <Logo />\n      <div id=\"body\">\n        <Switch>\n          <Route path=\"/query/:model/:fieldStr?.html\">\n            <Bob config={props} {...{ sortedModels }} />\n          </Route>\n          <Route path=\"/views/:pk.html\">\n            <EditSavedView {...{ baseUrl, canMakePublic }} />\n          </Route>\n          <Route path=\"/\">\n            <HomePage {...{ sortedModels, baseUrl }} />\n          </Route>\n        </Switch>\n      </div>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport * as Sentry from \"@sentry/browser\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nconst config = JSON.parse(\n    document.getElementById(\"backend-config\").textContent\n);\nconst version = document.getElementById(\"backend-version\").textContent.trim();\n\nif (config.sentryDsn) {\n    Sentry.init({\n        dsn: config.sentryDsn,\n        release: version,\n        attachStacktrace: true,\n        maxValueLength: 10000,\n    });\n}\n\nReactDOM.render(\n    <React.StrictMode>\n        <App {...config} />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}